package com.example.springboot.ant1.infrastructure;

import com.fasterxml.jackson.databind.ObjectMapper;
import org.springframework.stereotype.Component;
import org.springframework.web.reactive.function.client.WebClient;

@Component
public class ExternalGateway {

  private final WebClient webClient;

  public ExternalGateway(WebClient webClient) {
    this.webClient = webClient;
  }

  public String sendRequest() {
    var response = webClient.get()
        .uri("www.google.com")
        .retrieve()
        .toBodilessEntity()
        .block();
    if(response == null) {
      return "error";
    } else {
      return "success";
    }
  }
}
